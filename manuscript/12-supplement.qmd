# Supplemental Figures and Tables

```{r}
#| label: setup-supplement
library(tinytable)
library(dplyr)
library(ggplot2)
options(tinytable_html_mathjax = TRUE)

targets::tar_config_set(
  store = here::here("_targets"),
  script = here::here("_targets.R")
)

targets::tar_load(c(benchmark, moment))
invisible(list2env(targets::tar_read(fn_figure), .GlobalEnv))
showtext::showtext_auto()
theme_set(theme_proj())
```

```{r}
#| label: tbl-calibration
#| tbl-cap: "**Calibration Targets and Fit**"
moment |>
  mutate(
    variable = rep(
      c("Frac. married", "Prob. divorce", "Prob. marriage"),
      each = 2
    ),
    year = rep(c("1950", "2000"), 3)
  ) |>
  tidyr::pivot_wider(
    id_cols = variable,
    names_from = year,
    values_from = c(data, model_ct, model_dt),
    names_glue = "{year}_{.value}"
  ) |>
  select(
    variable,
    `1950_data`,
    `1950_model_ct`,
    `1950_model_dt`,
    `2000_data`,
    `2000_model_ct`,
    `2000_model_dt`
  ) |>
  setNames(c(" ", "Data", "CT", "DT", "Data", "CT", "DT")) |>
  tt(
    notes = "Notes: Data targets are from Greenwood and Guner (2009, Table 3). DT: discrete-time model solved by VFI with the Tauchen transition matrix. CT: continuous-time model solved via the HJB variational inequality and KFE. The CT match quality parameters are re-estimated to match the data targets; all other parameters are shared.",
    width = c(0.2, rep(0.1, 6))
  ) |>
  format_tt(j = 2:7, digits = 2) |>
  style_tt(align = "lcccccc") |>
  group_tt(j = list("1950" = 2:4, "2000" = 5:7))
```